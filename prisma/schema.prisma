generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Embed {
  guild_id                    String
  type                        EmbedType
  content                     String?
  embed_color                 String?
  embed_description           String?
  embed_fields                Json[]    @default([])
  embed_footer_icon_url       String?
  embed_footer_proxy_icon_url String?
  embed_footer_text           String?
  embed_image_height          Int?
  embed_image_proxy_url       String?
  embed_image_url             String?
  embed_image_width           Int?
  embed_thumbnail_height      Int?
  embed_thumbnail_proxy_url   String?
  embed_thumbnail_url         String?
  embed_thumbnail_width       Int?
  embed_timestamp             String?
  embed_title                 String?
  embed_url                   String?
  embed_author_icon           String?
  embed_author_name           String?
  embed_author_proxy_url      String?
  embed_author_url            String?

  @@id([guild_id, type])
}

model Guild {
  id                  String             @id @unique
  modlogs_channel     String?
  punishments_channel String?
  features            BigInt?
  premium_type        GuildPremiumType?
  premium_until       DateTime?
  GuildPermissions    GuildPermissions[]
  Reason              Reason[]
}

model GuildPermissions {
  id          String
  type        GuildPermissionType
  guild_id    String
  permissions BigInt
  Guild       Guild               @relation(fields: [guild_id], references: [id])

  @@id([guild_id, id])
}

model Punishment {
  id         Int            @id @unique @default(autoincrement())
  guild_id   String
  user_id    String
  author_id  String
  type       PunishmentType
  created_at DateTime
  flags      BigInt         @default(0)
  duration   Int?
  reason     String?
  reason_id  String?
  deleted    Boolean?       @default(false)
}

model Reason {
  id       String           @id @unique
  text     String
  guild_id String
  type     PunishmentType[]
  keys     String[]         @default([])
  duration Int?
  days     Int?
  Guild    Guild            @relation(fields: [guild_id], references: [id])
}

model User {
  id              String           @id @unique
  features        BigInt?
  luas            Int?
  xp              Int?
  last_daily_at   DateTime?
  premium_type    UserPremiumType?
  premium_until   DateTime?
  bio             String?
  flags           BigInt?
  inventary_using BigInt?
  inventory       BigInt?
}

enum GuildPermissionType {
  MEMBER
  ROLE
  COMMAND
}

enum GuildPremiumType {
  BASIC
  PLUS
}

enum PunishmentType {
  BAN
  MUTE
  KICK
  ADV
}

enum UserPremiumType {
  PLUS
}

enum EmbedType {
  BAN
  KICK
  MUTE
  ADV
  NOFITYDM
}
